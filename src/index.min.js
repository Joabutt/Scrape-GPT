require("dotenv").config();const axios=require("axios"),cheerio=require("cheerio"),OpenAI=require("openai"),openai=new OpenAI({apiKey:process.env.OPENAI_API_KEY});async function scrape(e,t){const n=(await axios.get(e)).data,o=cheerio.load(n)("body");return(await openai.chat.completions.create({messages:[{role:"system",content:`When you receive invalid JSON, respond only with valid JSON matching the schema: ${JSON.stringify(t)}`},{role:"system",content:"Only reply with JSON, nothing else. "},{role:"user",content:"{'bad': 'json', }"},{role:"assistant",content:'{"bad": "json"}'},{role:"user",content:`I have this website which i want to scrape (${e}),the scraped wesite data is here: ${o}, and i want you to return the data with the schema ${JSON.stringify(t)}, and return the data in JSON and respond only with valid JSON matching the schema only. Strictly respond with the schema fields, DO NOT CHANGE THE SCHEMA FIELD HEADS, only fill in the corresponding data fields for the field heads. DO NOT CHANGE THE SCHEMA FIELD HEADS`}],model:"gpt-4-1106-preview",response_format:{type:"json_object"}})).choices[0].message.content}module.exports={scrape:scrape};